[[req_cql-json_functions]]
[width="90%",cols="2,6a"]
|===
^|*Requirement {counter:req-id}* |*/req/cql-json/functions* 
^|A |A server that implements the <<rc_functions,Functions>> requirement class and also implements this requirement shall be able to parse a function call expression encoded as JSON that validates against the following JSON Schema fragment:

[source,JSON]
----
   "$comment": "=======================================================",
   "$comment": "=  FUNCTIONS                                          =",
   "$comment": "=======================================================",

   "functionRef": {
      "type": "object",
      "required": ["function"],
      "properties": {
         "function": { "$ref": "#/$defs/function" }
      }
   },

   "function": {
      "type": "object",
      "required": [ "name" ],
      "properties": {
         "name": { "type": "string" },
         "arguments": {
            "type": "array",
            "items": {
               "oneOf": [
                  { "$ref": "#/$defs/scalarLiteral" },
                  { "$ref": "#/$defs/spatialLiteral" },
                  { "$ref": "#/$defs/temporalLiteral" },
                  { "$ref": "#/$defs/propertyRef" },
                  { "$ref": "#/$defs/functionRef" },
                  { "$ref": "#/$defs/arithmeticExpression" }
               ]
            }
         }
      }
   },

   "scalarOperands": {
      "type": "array",
      "items": {
         "oneOf": [
            {"$ref": "#/$defs/scalarLiteral"},
            {"$ref": "#/$defs/propertyRef"},
            {"$ref": "#/$defs/functionRef"},
            {"$ref": "#/$defs/arithmeticExpression"}
         ],
         "minItems": 2,
         "maxItems": 2
      }
   },

   "spatialOperands": {
      "type": "array",
      "items": {
         "oneOf": [
            {"$ref": "#/$defs/spatialLiteral"},
            {"$ref": "#/$defs/propertyRef"},
            {"$ref": "#/$defs/functionRef"}
         ],
         "minItems": 2,
         "maxItems": 2
      }
   },

   "temporalOperands": {
      "type": "array",
      "items": {
         "oneOf": [
            {"$ref": "#/$defs/temporalLiteral"},
            {"$ref": "#/$defs/propertyRef"},
            {"$ref": "#/$defs/functionRef"}
         ],
         "minimumItems": 2,
         "maximumItems": 2
      }
   },
----

^|B |The list of valid function names can be discovered via the `functions` resource (i.e. path `/functions`).
^|C |If the server implements the <<rc_arithmetic>> conformance class then the `arguments` and `scalarOperands` objects shall be extended to include a reference to an arithmetic expression (i.e. #/$defs/arithmeticExpression).
|===
